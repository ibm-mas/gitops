---
apiVersion: discovery.watson.ibm.com/v1
kind: WatsonDiscovery
metadata:
  annotations:
    oppy.ibm.com/disable-rollback: 'true'
    argocd.argoproj.io/sync-wave: "-3"
  name: wd
  namespace: "{{ cpd_instance_namespace }}"
spec:
  blockStorageClass: "{{ cpd_wd_service_block_storage_class }}"
  version: "{{ cpd_wd_service_cr_version }}"
  license:
    accept: true
  shared:
    imagePullSecret: ibm-entitlement-key
    storageClassName: "{{ cpd_wd_service_storage_class }}"
    deploymentType: "{{ cpd_wd_service_deployment_type }}" # needed to upgrade wd
  watsonGateway:
    version: main
  elasticsearch:
    clientNode:
      persistence:
        size: 1Gi
    dataNode:
      persistence:
        size: 40Gi
    masterNode:
      persistence:
        size: 2Gi
  etcd:
    storageSize: 10Gi
  minio:
    persistence:
      size: 100Gi
  postgres:
    database:
      storageRequest: 30Gi
  rabbitmq:
    persistentVolume:
      size: 5Gi
