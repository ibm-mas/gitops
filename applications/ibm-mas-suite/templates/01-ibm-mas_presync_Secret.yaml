
{{- if .Values.sm_aws_access_key_id }}
---
kind: Secret
apiVersion: v1
metadata:
  name: aws
  namespace: ibm-common-services
  annotations:
    argocd.argoproj.io/sync-wave: "-4"
stringData:
  aws_access_key_id: {{ .Values.sm_aws_access_key_id }}
  aws_secret_access_key: {{ .Values.sm_aws_secret_access_key }}
  aws_default_region: {{ .Values.sm_aws_region }}
type: Opaque
{{- end }}

#---
#apiVersion: v1
#kind: ServiceAccount
#metadata:
#  name: presync-sa
#  namespace: openshift-gitops
#  annotations:
#    argocd.argoproj.io/sync-wave: "-4"
#  labels:
#    argocd.argoproj.io/managed-by: openshift-gitops
#---
#kind: RoleBinding
#apiVersion: rbac.authorization.k8s.io/v1
#metadata:
#  name: openshift-gitops
#  namespace: openshift-gitops
#  annotations:
#    argocd.argoproj.io/sync-wave: "-4"
#  labels:
#    argocd.argoproj.io/managed-by: openshift-gitops
#subjects:
#  - kind: ServiceAccount
#    name: presync-sa
#    namespace: openshift-gitops
#roleRef:
#  apiGroup: rbac.authorization.k8s.io
#  kind: ClusterRole
#  name: cluster-admin
