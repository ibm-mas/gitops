{{- if and (eq .Values.dns_provider "cis") (not .Values.mas_manual_cert_mgmt) }}
{{- if .Values.dro_public_domain }}
---
kind: Certificate
metadata:
  name: dro-tls-cert
  namespace: ibm-software-central
spec:
  secretName: dro-tls-secret # The Secret that will be created
  issuerRef:
    name: letsencrypt-staging # Name of the ClusterIssuer created in Step 1
    kind: ClusterIssuer
  commonName: {{ .Values.dro_public_domain }}
  dnsNames:
  - {{ .Values.dro_public_domain }}
  privateKey:
    rotationPolicy: Always
{{- end }}
{{- end }}