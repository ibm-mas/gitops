{{- if (eq .Values.dns_provider "cis") }}
{{- if .Values.dro_public_domain }}
---
kind: Route
apiVersion: route.openshift.io/v1
metadata:
  name: ibm-data-reporter-public-route
  namespace: "{{ .Values.dro_namespace }}"
  labels:
    type: external

spec:
  host: "dro.{{ .Values.cluster_id }}.{{ .Values.dro_public_domain }}"
  to:
    kind: Service
    name: ibm-data-reporter-operator-controller-manager-metrics-service
    weight: 100
  port:
    targetPort: 8443
  tls:
    termination: reencrypt
    insecureEdgeTerminationPolicy: Redirect
    certificate: |-
      {{ .Values.dro_tls_certificate }}
    key: |-
      {{ .Values.dro_tls_key }}
  wildcardPolicy: None
{{- end }}
{{- end }}