{{- if .Values.setup_log_forwarding }}
# The pull secret for syslog forwarder
---
kind: Secret
apiVersion: v1
metadata:
  name: syslog-pullsecret
  namespace: openshift-logging
  annotations:
    argocd.argoproj.io/sync-wave: "054"
{{- if .Values.custom_labels }}
  labels:
{{ .Values.custom_labels | toYaml | indent 4 }}
{{- end }}
data:
  .dockerconfigjson: >-
    {{ .Values.log_forwarder_pullsecret }}
type: kubernetes.io/dockerconfigjson


# ca cert from DLC setup
---
kind: Secret
apiVersion: v1
metadata:
  name: dlc-cert
  namespace: openshift-logging
  annotations:
    argocd.argoproj.io/sync-wave: "054"
{{- if .Values.custom_labels }}
  labels:
{{ .Values.custom_labels | toYaml | indent 4 }}
{{- end }}
data:
  caBundle.crt: "{{ .Values.log_forwarder_dlc_cert }}"
type: Opaque


# tls cert for the client
---
kind: Secret
apiVersion: v1
metadata:
  name: syslog-forwarder
  namespace: openshift-logging
  annotations:
    argocd.argoproj.io/sync-wave: "054"
{{- if .Values.custom_labels }}
  labels:
{{ .Values.custom_labels | toYaml | indent 4 }}
{{- end }}
data:
  ca-bundle.crt: "{{ .Values.log_forwarder_ca_bundle }}"
  ca.crt: "{{ .Values.Values.log_forwarder_ca_cert }}"
  tls.crt:  "{{ .Values.Values.log_forwarder_tls_cert }}"
  tls.key:  "{{ .Values.Values.log_forwarder_tls_key }}"
type: kubernetes.io/tls
{{- end }}
