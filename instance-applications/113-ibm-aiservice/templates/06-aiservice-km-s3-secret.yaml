---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: km-s3-secret
  namespace: "{{ .Values.aiservice_namespace }}"
  annotations:
    argocd.argoproj.io/sync-wave: "147"
    serving.kserve.io/s3-endpoint: "{{ .Values.aiservice_s3_host }}:{{ .Values.aiservice_s3_port }}"
    {{- if eq .Values.aiservice_s3_ssl "false" }}
    serving.kserve.io/s3-usehttps: "0"
    {{- else }}
    serving.kserve.io/s3-usehttps: "1"
    {{- end }}
    serving.kserve.io/s3-region: "{{ .Values.aiservice_s3_region }}"
stringData:
  AWS_ACCESS_KEY_ID: "{{ .Values.aiservice_s3_accesskey}}"
  AWS_SECRET_ACCESS_KEY: "{{ .Values.aiservice_s3_secretkey}}"
  S3_ACCESS_KEY: "{{ .Values.aiservice_s3_accesskey}}"
  S3_SECRET_KEY: "{{ .Values.aiservice_s3_secretkey}}"
  S3_HOST: "{{ .Values.aiservice_s3_host}}"
  {{- if .Values.aiservice_s3_port }}
  S3_PORT: "{{ .Values.aiservice_s3_port }}"
  {{- else }}
  S3_PORT: ""
  {{- end }}
  S3_REGION: "{{ .Values.aiservice_s3_region}}"
  S3_SSL: "{{ .Values.aiservice_s3_ssl}}"

