---
apiVersion: apps.mas.ibm.com/v1
kind: AiBrokerApp
metadata:
    name: "{{ .Values.mas_instance_id }}"
    namespace: "{{ .Values.aibroker_namespace }}"
    labels:
        mas.ibm.com/applicationId: aibroker
        mas.ibm.com/instanceId: "{{ .Values.mas_instance_id }}"
    annotations:
        argocd.argoproj.io/sync-wave: "131"
        argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
    settings:
        icr:
            cp: "{{ .Values.mas_icr_cp }}"
            cpopen: "{{ .Values.mas_icr_cpopen }}"
        dro:
            url: "{{ .Values.drocfg.url }}"
            dro_token_secret: "{{ .Values.mas_aibroker_dro_token_secret }}"
            ca: "{{ .Values.drocfg.ca }}"
        jdbc:
            url: "{{ .Values.jdbccfg.url | b64enc }}"
            credentials_secret: "{{ .Values.mas_aibroker_db2_jdbc_secret }}"
            ca: "{{ .Values.jdbccfg.ca | b64enc }}"
        cluster_domain: "{{ .Values.cluster_domain }}"
        in_saas_env: "{{ .Values.in_saas_env }}"
