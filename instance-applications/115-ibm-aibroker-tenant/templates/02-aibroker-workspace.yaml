---
apiVersion: apps.mas.ibm.com/v1
kind: AiBrokerWorkspace
metadata:
  name: "{{ .Values.tenantNamespace }}"
  namespace: "{{ .Values.aibroker_namespace }}"
  annotations:
    argocd.argoproj.io/sync-wave: "301"
  labels: 
    mas.ibm.com/applicationId: "aibroker"
    mas.ibm.com/instanceId: "{{ .Values.mas_instance_id }}"
    {{- if .Values.custom_labels }}
    {{- range $key, $val := .Values.custom_labels }}
    {{ $key | quote }}: {{ $val | quote }}
    {{- end }}
    {{- end }}
spec:
  settings:
    cluster_domain: "{{ .Values.cluster_domain }}"
    in_saas_env: "{{ .Values.in_saas_env }}"
    icr:
      cp: "{{ .Values.mas_icr_cp }}"
      cpopen: "{{ .Values.mas_icr_cpopen }}"
    dro:
      url: "{{ .Values.drocfg_url }}"
      dro_token_secret: "{{ .Values.mas_aibroker_dro_token_secret }}"
      ca: "{{ .Values.drocfg_ca }}"
    sls:
      url: "{{ .Values.slscfg_url }}"
      sls_registration_key_secret: "{{ .Values.slscfg_registration_key }}"
      ca: "{{ .Values.slscfg_ca }}"
    watsonxai:
      url: "{{ .Values.mas_aibroker_watsonxai_url }}"
      api_key: "{{ .Values.mas_aibroker_watsonxai_apikey }}"
      project_id: "{{ .Values.mas_aibroker_watsonxai_project_id }}"
    tenant:
      tenant_id: "{{ .Values.tenantNamespace }}"
      subscription_id: "{{ .Values.mas_aibroker_sls_subscription_id }}"
      instance_id: "{{ .Values.mas_instance_id }}"
