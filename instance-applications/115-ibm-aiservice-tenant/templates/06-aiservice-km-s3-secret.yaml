---
kind: Secret
metadata:
  name: km-s3-secret
  namespace: "{{ .Values.tenantNamespace }}"
  labels:
    app.kubernetes.io/managed-by: gitops
  annotations:
    {{- with (lookup "v1" "Secret" (printf "aiservice-%s" .Values.aiservice_instance_id) "km-s3-secret") }}
    {{- if .metadata.annotations }}
    {{- range $k, $v := .metadata.annotations }}
    {{- if ne $k "argocd.argoproj.io/sync-wave" }}
    {{ $k }}: {{ $v | quote }}
    {{- end }}
    {{- end }}
    {{- end }}
    {{- end }}
    argocd.argoproj.io/sync-wave: "305"
type: Opaque
stringData:
  {{- with (lookup "v1" "Secret" .Values.ibm_aiservice_tenant.aiservice_namespace "km-s3-secret") }}
  {{- range $k, $v := .data }}
  {{ $k }}: {{ $v }}
  {{- end }}
  {{- end }}
---

apiVersion: v1
kind: Secret
metadata:
  name: ibm-entitlement
  namespace: "{{ .Values.tenantNamespace }}"
  labels:
    app.kubernetes.io/managed-by: gitops
  annotations:
    argocd.argoproj.io/sync-wave: "306"
type: Opaque
stringData:
  {{- with (lookup "v1" "Secret" .Values.ibm_aiservice_tenant.aiservice_namespace "ibm-entitlement") }}
  {{- range $k, $v := .data }}
  {{ $k }}: {{ $v }}
  {{- end }}
  {{- end }}
