---
apiVersion: config.mas.ibm.com/v1
kind: AppCfg
metadata:
  name: "{{ .Values.mas_config_name }}"
  namespace: mas-{{ .Values.instance_id }}-core
  annotations:
    argocd.argoproj.io/sync-wave: "131"
  labels:
    mas.ibm.com/configScope: system
    mas.ibm.com/instanceId: {{ .Values.instance_id }}
spec:
  displayName: Application configuration
  config:
    enabled: true
    persistentVolume:
      name: app-config
      size: 2Gi
      storageClassName: ocs-storagecluster-cephfs
  podTemplates:
    - name: graphite-configuration
      replicas: 1
      containers:
        - name: graphite-configuration
          resources:
            limits:
              cpu: 5
              memory: 8Gi
            requests:
              cpu: 10m
              memory: 256Mi