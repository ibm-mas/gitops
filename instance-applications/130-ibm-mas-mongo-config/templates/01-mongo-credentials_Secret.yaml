---
kind: Secret
apiVersion: v1
metadata:
  name: "{{ .Values.config.credentials.secretName }}"
  namespace: mas-{{ .Values.instance_id }}-core
  annotations:
    argocd.argoproj.io/sync-wave: "131"
{{- if .Values.custom_labels }}
  labels:
{{ .Values.custom_labels | toYaml | indent 4 }}
{{- end }}
type: Opaque
stringData:
  username: "{{ .Values.username }}"
  password: "{{ .Values.password }}"

---
kind: Secret
apiVersion: v1
metadata:
  name: mongo-db
  namespace: mas-{{ .Values.instance_id }}-core
  annotations:
    argocd.argoproj.io/hook: PostDelete
    argocd.argoproj.io/hook-delete-policy: HookSucceeded
{{- if .Values.custom_labels }}
  labels:
{{ .Values.custom_labels | toYaml | indent 4 }}
{{- end }}
stringData:
  mongo_username: {{ .Values.username }}
  mongo_password: {{ .Values.password }}
  mas_wipe_mongo_data: "{{ .Values.mas_wipe_mongo_data }}"
  config.yaml: |
{{ .Values.config | toYaml | indent 4 }}
  certificates.yaml: |
{{ .Values.certificates | toYaml | indent 4 }}
type: Opaque
